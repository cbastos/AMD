/*! amd 2015-10-07 */

var JSL=JSL||{classes:{}};!function(a){"use strict";function b(){}function c(a,b){for(var e in a)"string"==typeof a[e]?a[e]=d(a[e],b):Array.isArray(a[e])?a[e]=d(a[e][0],b):c(a[e],b)}function d(a,b){for(var c=a.split("."),d={},e=0,f=c.length;f>e;e++)d=0===e?window[c[e]]:d[c[e]];return d&&d.from&&(d=b(d)),d}b.prototype.createFrom=function(a,b,d){var e=a||{};c(e,d);for(var f in b)e[f]=b[f];return e},a.classes.DependenciesFactory=b}(JSL);var JSL=JSL||{classes:{}};!function(a){"use strict";function b(b,c,d){function e(a){var b=void 0===a||"string"!=typeof a.id||"function"!=typeof a.from;if(b)throw'You\'re trying to register an element without \'id\' identifier or a \'from\' origin. You must specify an identifier "id" (string) and a from "from" (a function to get the module or a path (string) where is placed the element), and you can optionally establish "dependencies" of the element.'}function f(a){for(var b=a.id.split("."),c=window,d=0,e=b.length-1;e>d;d++)c=c[b[d]]?c[b[d]]:c[b[d]]={};c[b[b.length-1]]=a}function g(c){var d=new a.classes.Promise,e=h(c);return e.length>0?b.download(e).then(function(){d.resolve()}):d.resolve(),d}function h(a){var b=[];for(var c in a){var d=a[c];if("string"!=typeof d||i(d))if(Array.isArray(d)){for(var e=[],f=0,g=d.length;g>f;++f)i(d[f])||e.push(d[f]);b.push(e)}else"object"==typeof d&&(b=b.concat(h(d)));else b.push(d)}return b}function i(a){for(var b=a.split("."),c={},d=0,e=b.length;e>d;d++)if(c=0===d?window[b[d]]:c[b[d]],"undefined"==typeof c)return!1;return!0}function j(d){var e=new a.classes.Promise;return i(d)?e.resolve(k(d)):c.getNumberOfRequestsFor(d)<=1&&b.download([d]).then(function(){e.resolve(k(d))}),e}function k(a){for(var b=a.split("."),c={},d=0,e=b.length;e>d;d++)c=0===d?window[b[d]]:c[b[d]];return c}function l(a){for(var b=k(a);c.hasRequestsRegisteredFor(a);){var d=c.getFirstModuleRequestFor(a);c.deleteFirstModuleRequestFor(a),b&&b.from?m(b,d,o):d.resolve(k(a))}}function m(a,b,c){var e=b&&"function"==typeof b.resolve,f=d.createFrom(a.dependencies,c,m),g=a.from(f);return e&&b.resolve(g),g}var n=this,o={};n.setDefaultDependencies=function(a){o=a},n.register=function(a){e(a),i(a.id)||f(a)},n.get=function(b){var d=new a.classes.Promise,e=b.id;return c.registerModuleRequest({id:e,moduleRequestPromise:d}),j(e).then(function(a){g(a.dependencies).then(function(){l(e)})}),d}}a.classes.ModuleManager=b}(JSL);var JSL=JSL||{classes:{}};!function(a){"use strict";function b(){this.startingModules={}}b.prototype.registerModuleRequest=function(a){this.startingModules[a.id]=this.startingModules[a.id]||[],this.startingModules[a.id].push(a.moduleRequestPromise)},b.prototype.getNumberOfRequestsFor=function(a){return this.startingModules[a]?this.startingModules[a].length:0},b.prototype.hasRequestsRegisteredFor=function(a){return this.startingModules[a]&&0!==this.startingModules[a].length},b.prototype.getFirstModuleRequestFor=function(a){return this.startingModules[a][0]},b.prototype.deleteFirstModuleRequestFor=function(a){this.startingModules[a].splice(0,1)},a.classes.ModuleRequestTracker=b}(JSL);var JSL=JSL||{classes:{}};!function(a){"use strict";function b(){this.resolved=!1}b.prototype.then=function(a){this.callback=a,this.resolved&&this.callback.apply({},this.args)},b.prototype.resolve=function(){this.args=arguments,this.resolved=!0,this.callback&&this.callback.apply({},this.args)},a.classes.Promise=b}(JSL);var JSL=JSL||{classes:{}};!function(a){"use strict";function b(){this._scriptPaths={}}function c(a){var b=a&&"string"==typeof a.id&&"undefined"!=typeof a.from;if(!b)throw'The reference has wrong properties. Try to set an script "id" (string) and a "from". (Wrong reference: '+JSON.stringify(a)+")."}function d(a){var b=this;return"string"==typeof a?f.call(b,a):e.call(b,a[0],a)}function e(b,c){var d=this,g=new a.classes.Promise;if(0===c.length)g.resolve(b);else{var h=c[0];f.call(d,h).then(function(){c.shift(),e.call(d,b,c).then(function(){g.resolve()})})}return g}function f(b){var c=this,d=new a.classes.Promise,e=g(b);return void 0===e?h({id:b,scriptPath:i.call(c,b)}).then(function(){d.resolve(b)}):"true"===e.getAttribute("data-loaded")?d.resolve(b):e.addEventListener("load",function(){d.resolve(b)}),d}function g(a){var b=document.getElementsByTagName("script");for(var c in b){var d="object"==typeof b[c]&&b[c].getAttribute("data-identifier")===a;if(d)return b[c]}}function h(b){var c=new a.classes.Promise,d=document.createElement("script");return d.setAttribute("data-identifier",b.id),d.addEventListener("load",function(){d.setAttribute("data-loaded",!0),c.resolve()},!1),d.src=b.scriptPath,document.head.appendChild(d),c}function i(a){var b=this._scriptPaths[a];if("undefined"!=typeof b){var c=this._pathResolver(b);if("string"==typeof c)return c;throw'The resolved url for "'+a+'"is not a string.'}throw'The "'+a+"\" from hasn't been added."}b.prototype._pathResolver=function(a){return a.from},b.prototype.register=function(a){c(a),this._scriptPaths[a.id]=a},b.prototype.download=function(b){function c(a){b.splice(b.indexOf(a),1),0===b.length&&e.resolve()}for(var e=new a.classes.Promise,f=0,g=b.length;g>f;++f)d.call(this,b[f]).then(c);return e},b.prototype.setPathResolver=function(a){if("function"!=typeof a)throw"The configured pathResolver is not a function";this._pathResolver=a},a.classes.ScriptProvider=b}(JSL);var JSL=JSL||{classes:{}};!function(a){"use strict";var b=new a.classes.ScriptProvider,c=new a.classes.ModuleRequestTracker,d=new a.classes.DependenciesFactory,e=new a.classes.ModuleManager(b,c,d);a.set=function(a){"function"==typeof a.from?e.register(a):b.register(a)},a.get=function(){return e.get.apply(this,arguments)},a.config=function(a){"undefined"!=typeof a&&("undefined"!=typeof a.pathResolver&&b.setPathResolver(a.pathResolver),"undefined"!=typeof a.dependencies&&e.setDefaultDependencies(a.dependencies))}}(JSL);
//# sourceMappingURL=JSL.min.js.map